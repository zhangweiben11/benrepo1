<?xml version="1.1" encoding="UTF-8"?>
<!-- salt:cde82315-e936-41f1-90c6-32daeeda6afd -->
<metadata name="prcBI_FacetSearch" path="/shared/Delta_DV/Business/Logical/Billing/Procedures/prcBI_FacetSearch" type="PROCEDURE" subtype="SQL_SCRIPT_PROCEDURE" changeToken="0">
  <annotation><![CDATA[InvoiceSearch API for EbillPay:This script is used to join the  two package queries]]></annotation>
  <parameters>
    <parameter name="inBillToGroupName" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBillToGroupNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="200"/>
    </parameter>
    <parameter name="inBillToId" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBillerId" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBrand" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="20"/>
    </parameter>
    <parameter name="inInvoiceDateStart" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="inInvoiceDateEnd" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="inInvoiceNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="200"/>
    </parameter>
    <parameter name="inInvoiceStatus" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inInvoiceType" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inLegalEntity" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inReconNoteExists" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="1"/>
    </parameter>
    <parameter name="inReconLineItemExists" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="1"/>
    </parameter>
    <parameter name="result" direction="OUT" nullable="true">
      <datatype name="result" type="TABLE" refId="256">
        <element name="billToGroupName">
          <datatype name="VARCHAR" type="STRING" maxLength="400"/>
        </element>
        <element name="invoiceNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="legalEntity">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billToId">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billerId">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billToGroupNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="400"/>
        </element>
        <element name="reconNoteExists">
          <datatype name="VARCHAR" type="STRING" maxLength="1"/>
        </element>
        <element name="reconLineItemexists">
          <datatype name="VARCHAR" type="STRING" maxLength="1"/>
        </element>
      </datatype>
    </parameter>
  </parameters>
  <security>
    <owner user="nobody" domain="composite"/>
  </security>
  <dependency target="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPI_FacetSearch" type="PROCEDURE">
    <datatype type="PROCEDURE" refId="258">
      <element name="BillToGroupName" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="BillToGroupNumber" direction="IN">
        <datatype type="STRING" maxLength="200"/>
      </element>
      <element name="BillToId" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="BillerId" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="Brand" direction="IN">
        <datatype type="STRING" maxLength="100"/>
      </element>
      <element name="InvoiceStartDate" direction="IN">
        <datatype type="DATE"/>
      </element>
      <element name="InvoiceEndDate" direction="IN">
        <datatype type="DATE"/>
      </element>
      <element name="invoiceNumber" direction="IN">
        <datatype type="STRING" maxLength="50"/>
      </element>
      <element name="InvoiceStatus" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="InvoiceType" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="LegalEntity" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="ReconNoteExists" direction="IN">
        <datatype type="STRING" maxLength="1"/>
      </element>
      <element name="ReconLineItemExists" direction="IN">
        <datatype type="STRING" maxLength="1"/>
      </element>
      <element name="result" direction="OUT">
        <datatype type="TABLE" refId="256">
          <element name="billToGroupName">
            <datatype type="STRING" maxLength="4000"/>
          </element>
          <element name="legalEntity">
            <datatype type="STRING" maxLength="4000"/>
          </element>
          <element name="billToId">
            <datatype type="STRING" maxLength="4000"/>
          </element>
          <element name="billerId">
            <datatype type="STRING" maxLength="4000"/>
          </element>
          <element name="billToGroupNumber">
            <datatype type="STRING" maxLength="4000"/>
          </element>
          <element name="invoiceNumber">
            <datatype type="STRING" maxLength="100"/>
          </element>
          <element name="reconnoteexists">
            <datatype type="STRING" maxLength="1"/>
          </element>
          <element name="reconlineitemexists">
            <datatype type="STRING" maxLength="1"/>
          </element>
        </datatype>
      </element>
    </datatype>
  </dependency>
  <dependency target="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkpPI_InvoicePaymentStatus" type="PROCEDURE">
    <datatype type="PROCEDURE" refId="258">
      <element name="billToGroupNumber" direction="IN">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="invoiceNumber" direction="IN">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="result" direction="OUT">
        <datatype type="TABLE" refId="256">
          <element name="invoiceNumber">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="billToGroupNumber">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="invoicePaidStatus">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="invoicebalancedue">
            <datatype type="STRING" maxLength="255"/>
          </element>
        </datatype>
      </element>
    </datatype>
  </dependency>
  <attribute name="Script" type="STRING">PROCEDURE prcBI_FacetSearch(
IN inBillToGroupName VARCHAR(4000),
IN inBillToGroupNumber VARCHAR(200),
IN inBillToId VARCHAR(4000),
IN inBillerId VARCHAR(4000),
IN inBrand VARCHAR(20),
IN inInvoiceDateStart DATE,
IN inInvoiceDateEnd DATE,
IN inInvoiceNumber VARCHAR(200),
IN inInvoiceStatus VARCHAR(4000),
IN inInvoiceType VARCHAR(4000),
IN inLegalEntity VARCHAR(4000),
IN inReconNoteExists VARCHAR(1),
IN inReconLineItemExists VARCHAR(1),
   OUT result CURSOR (
   billToGroupName varchar(400),
   invoiceNumber VARCHAR(200), 
   legalEntity VARCHAR(200), 
   billToId VARCHAR(200), 
   billerId VARCHAR(200),
   billToGroupNumber varchar(400),
   reconNoteExists VARCHAR(1),
   reconLineItemexists VARCHAR(1)
))
BEGIN 
    OPEN result FOR
SELECT
&#x9;invoice.billToGroupName, 
&#x9;invoice.invoiceNumber,
    invoice.legalEntity, 
    invoice.billToId, 
    invoice.billerId,
&#x9;invoice.billToGroupNumber,
&#x9;invoice.reconnoteexists,&#x9;
&#x9;invoice.reconLineItemexists
FROM      
/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPI_FacetSearch
(inBillToGroupName,inBillToGroupNumber,inBillToId,inBillerId,inBrand,inInvoiceDateStart,inInvoiceDateEnd,
inInvoiceNumber,inInvoiceStatus,inInvoiceType,inLegalEntity,inReconNoteExists,inReconLineItemExists)invoice 
LEFT OUTER JOIN 
/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkpPI_InvoicePaymentStatus
(inBillToGroupNumber,inInvoiceNumber) payment
   ON  invoice.invoiceNumber = payment.invoiceNumber AND 
      invoice.billToGroupNumber = payment.billToGroupNumber
;
END</attribute>
  <attribute name="creationDate" type="LONG">1611713329184</attribute>
  <attribute name="creatorUserDomain" type="STRING">dev</attribute>
  <attribute name="creatorUserId" type="INTEGER">2850169</attribute>
  <attribute name="creatorUserName" type="STRING">dca32905</attribute>
  <attribute name="explicitly.designed" type="BOOLEAN">false</attribute>
  <attribute name="lastModifiedDate" type="LONG">1612831669653</attribute>
  <attribute name="lastModifiedUserDomain" type="STRING">dev</attribute>
  <attribute name="lastModifiedUserId" type="INTEGER">2850169</attribute>
  <attribute name="lastModifiedUserName" type="STRING">dca89313</attribute>
  <attribute name="model" type="NULL"/>
  <attribute name="native_only" type="STRING">false</attribute>
  <attribute name="references" type="NULL"/>
  <attribute name="resourceModifiedDateOnSourceCISSite" type="LONG">1611713329184</attribute>
</metadata>