<?xml version="1.1" encoding="UTF-8"?>
<!-- salt:cde82315-e936-41f1-90c6-32daeeda6afd -->
<metadata name="prcBI_InvoiceSearch" path="/shared/Delta_DV/Business/Logical/Billing/Procedures/prcBI_InvoiceSearch" type="PROCEDURE" subtype="SQL_SCRIPT_PROCEDURE" changeToken="0">
  <annotation><![CDATA[InvoiceSearch API for EbillPay:This script is used to join the  two package queries]]></annotation>
  <parameters>
    <parameter name="inSortField" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="500"/>
    </parameter>
    <parameter name="inBillToGroupName" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBillToGroupNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="200"/>
    </parameter>
    <parameter name="inBillToId" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBillerId" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inBrand" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="20"/>
    </parameter>
    <parameter name="inInvoiceDateStart" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="inInvoiceDateEnd" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="inInvoiceNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="200"/>
    </parameter>
    <parameter name="inInvoiceStatus" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inInvoiceType" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inLegalEntity" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="4000"/>
    </parameter>
    <parameter name="inReconNoteExists" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="1"/>
    </parameter>
    <parameter name="inReconLineItemExists" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="1"/>
    </parameter>
    <parameter name="inNumberOfRowsPerPage" direction="IN" nullable="true">
      <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
    </parameter>
    <parameter name="inPageNumber" direction="IN" nullable="true">
      <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
    </parameter>
    <parameter name="result" direction="OUT" nullable="true">
      <datatype name="result" type="TABLE" refId="256">
        <element name="invoiceNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoiceDate">
          <datatype name="DATE" type="DATE"/>
        </element>
        <element name="coverageStartDate">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="coverageEndDate">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoiceStatus">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoiceType">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoiceSubType">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billToGroupNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billToDivisionNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="billToGroupName">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="numberOfEnrollees">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="invoiceAmount">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="adjustmentAmount">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="legalEntity">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billToId">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="billerId">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoiceVersion">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="reconNoteExists">
          <datatype name="VARCHAR" type="STRING" maxLength="1"/>
        </element>
        <element name="reconLineItemexists">
          <datatype name="VARCHAR" type="STRING" maxLength="1"/>
        </element>
        <element name="invoicePaidStatus">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="invoicebalancedue">
          <datatype name="VARCHAR" type="STRING" maxLength="200"/>
        </element>
        <element name="totalnumberofrows">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
      </datatype>
    </parameter>
  </parameters>
  <security>
    <owner user="nobody" domain="composite"/>
  </security>
  <dependency target="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPI_InvoiceSearch" type="PROCEDURE">
    <datatype type="PROCEDURE" refId="258">
      <element name="sortField" direction="IN">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="BillToGroupName" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="BillToGroupNumber" direction="IN">
        <datatype type="STRING" maxLength="200"/>
      </element>
      <element name="BillToId" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="BillerId" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="Brand" direction="IN">
        <datatype type="STRING" maxLength="100"/>
      </element>
      <element name="InvoiceStartDate" direction="IN">
        <datatype type="DATE"/>
      </element>
      <element name="InvoiceEndDate" direction="IN">
        <datatype type="DATE"/>
      </element>
      <element name="invoiceNumber" direction="IN">
        <datatype type="STRING" maxLength="50"/>
      </element>
      <element name="InvoiceStatus" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="InvoiceType" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="LegalEntity" direction="IN">
        <datatype type="STRING" maxLength="4000"/>
      </element>
      <element name="ReconNoteExists" direction="IN">
        <datatype type="STRING" maxLength="1"/>
      </element>
      <element name="ReconLineItemExists" direction="IN">
        <datatype type="STRING" maxLength="1"/>
      </element>
      <element name="numberOfRowsPerPage" direction="IN">
        <datatype type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
      </element>
      <element name="pageNumber" direction="IN">
        <datatype type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
      </element>
      <element name="result" direction="OUT">
        <datatype type="TABLE" refId="256">
          <element name="invoiceNumber">
            <datatype type="STRING" maxLength="30"/>
          </element>
          <element name="invoiceDate">
            <datatype type="DATE"/>
          </element>
          <element name="coverageStartDate">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="coverageEndDate">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="invoiceStatus">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="invoiceType">
            <datatype type="STRING" maxLength="50"/>
          </element>
          <element name="invoiceSubType">
            <datatype type="STRING" maxLength="50"/>
          </element>
          <element name="billToGroupNumber">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="billToDivisionNumber">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="billToGroupName">
            <datatype type="STRING" maxLength="500"/>
          </element>
          <element name="numberOfEnrollees">
            <datatype type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
          </element>
          <element name="invoiceAmount">
            <datatype type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
          </element>
          <element name="adjustmentAmount">
            <datatype type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
          </element>
          <element name="legalEntity">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="billToId">
            <datatype type="STRING" maxLength="50"/>
          </element>
          <element name="billerId">
            <datatype type="STRING" maxLength="50"/>
          </element>
          <element name="invoiceVersion">
            <datatype type="STRING" maxLength="10"/>
          </element>
          <element name="reconNoteExists">
            <datatype type="STRING" maxLength="1"/>
          </element>
          <element name="reconLineItemExists">
            <datatype type="STRING" maxLength="1"/>
          </element>
          <element name="rk">
            <datatype type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
          </element>
          <element name="totalNumberOfRows">
            <datatype type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
          </element>
        </datatype>
      </element>
    </datatype>
  </dependency>
  <dependency target="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkpPI_InvoicePaymentStatus" type="PROCEDURE">
    <datatype type="PROCEDURE" refId="258">
      <element name="billToGroupNumber" direction="IN">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="invoiceNumber" direction="IN">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="result" direction="OUT">
        <datatype type="TABLE" refId="256">
          <element name="invoiceNumber">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="billToGroupNumber">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="invoicePaidStatus">
            <datatype type="STRING" maxLength="255"/>
          </element>
          <element name="invoicebalancedue">
            <datatype type="STRING" maxLength="255"/>
          </element>
        </datatype>
      </element>
    </datatype>
  </dependency>
  <attribute name="Script" type="STRING">PROCEDURE prcBI_InvoiceSearch(IN inSortField VARCHAR(500),
IN inBillToGroupName VARCHAR(4000),
IN inBillToGroupNumber VARCHAR(200),
IN inBillToId VARCHAR(4000),
IN inBillerId VARCHAR(4000),
IN inBrand VARCHAR(20),
IN inInvoiceDateStart DATE,
IN inInvoiceDateEnd DATE,
IN inInvoiceNumber VARCHAR(200),
IN inInvoiceStatus VARCHAR(4000),
IN inInvoiceType VARCHAR(4000),
IN inLegalEntity VARCHAR(4000),
IN inReconNoteExists VARCHAR(1),
IN inReconLineItemExists VARCHAR(1),
IN inNumberOfRowsPerPage INTEGER,
IN inPageNumber INTEGER,
   OUT result CURSOR (
   invoiceNumber VARCHAR(200), 
   invoiceDate DATE, 
   coverageStartDate VARCHAR(200),
   coverageEndDate VARCHAR(200),
   invoiceStatus VARCHAR(200),
   invoiceType VARCHAR(200), 
   invoiceSubType VARCHAR(200),  
   billToGroupNumber VARCHAR(200), 
   billToDivisionNumber VARCHAR(10), 
   billToGroupName VARCHAR(200),
   numberOfEnrollees double, 
   invoiceAmount double, 
   adjustmentAmount double, 
   legalEntity VARCHAR(200), 
   billToId VARCHAR(200), 
   billerId VARCHAR(200), 
   invoiceVersion VARCHAR(10),
   reconNoteExists VARCHAR(1),
   reconLineItemexists VARCHAR(1),
   invoicePaidStatus VARCHAR(200), 
   invoicebalancedue VARCHAR(200), 
   totalnumberofrows double
))
BEGIN 
    OPEN result FOR
SELECT invoice.invoiceNumber,
invoice.invoiceDate, 
    invoice.coverageStartDate, 
    invoice.coverageEndDate, 
    invoice.invoiceStatus,
    invoice.invoiceType, 
    invoice.invoiceSubType, 
    invoice.billToGroupNumber, 
    invoice.billToDivisionNumber, 
    invoice.billToGroupName, 
    invoice.numberOfEnrollees, 
    invoice.invoiceAmount, 
    invoice.adjustmentAmount, 
    invoice.legalEntity, 
    invoice.billToId, 
    invoice.billerId, 
    invoice.invoiceVersion, 
invoice.reconnoteexists,
invoice.reconLineItemexists,
    payment.invoicePaidStatus, 
    payment.invoicebalancedue,
&#x9;invoice.totalnumberofrows
FROM      
/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPI_InvoiceSearch
(inSortField,inBillToGroupName,inBillToGroupNumber,inBillToId,inBillerId,inBrand,inInvoiceDateStart,inInvoiceDateEnd,
inInvoiceNumber,inInvoiceStatus,inInvoiceType,inLegalEntity,inReconNoteExists,inReconLineItemExists,inNumberOfRowsPerPage,inPageNumber)invoice 
LEFT OUTER JOIN 
/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkpPI_InvoicePaymentStatus
(inBillToGroupNumber,inInvoiceNumber) payment
   ON  invoice.invoiceNumber = payment.invoiceNumber AND 
      invoice.billToGroupNumber = payment.billToGroupNumber
;
END</attribute>
  <attribute name="creationDate" type="LONG">1611713329184</attribute>
  <attribute name="creatorUserDomain" type="STRING">dev</attribute>
  <attribute name="creatorUserId" type="INTEGER">2850169</attribute>
  <attribute name="creatorUserName" type="STRING">dca32905</attribute>
  <attribute name="explicitly.designed" type="BOOLEAN">false</attribute>
  <attribute name="lastModifiedDate" type="LONG">1612474554682</attribute>
  <attribute name="lastModifiedUserDomain" type="STRING">dev</attribute>
  <attribute name="lastModifiedUserId" type="INTEGER">2850169</attribute>
  <attribute name="lastModifiedUserName" type="STRING">dca32905</attribute>
  <attribute name="model" type="NULL"/>
  <attribute name="native_only" type="STRING">false</attribute>
  <attribute name="references" type="NULL"/>
  <attribute name="resourceModifiedDateOnSourceCISSite" type="LONG">1611713329184</attribute>
</metadata>