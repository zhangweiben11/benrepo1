<?xml version="1.1" encoding="UTF-8"?>
<!-- salt:cde82315-e936-41f1-90c6-32daeeda6afd -->
<metadata name="pkgPI_InvoiceSearch_test" path="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPI_InvoiceSearch_test" type="PROCEDURE" subtype="EXTERNAL_SQL_PROCEDURE" changeToken="0">
  <annotation><![CDATA[Ebillpay:to extract only billtogroup payment details]]></annotation>
  <parameters>
    <parameter name="sortField" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="255"/>
    </parameter>
    <parameter name="BillToGroupNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="200"/>
    </parameter>
    <parameter name="InvoiceStartDate" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="InvoiceEndDate" direction="IN" nullable="true">
      <datatype name="DATE" type="DATE"/>
    </parameter>
    <parameter name="invoiceNumber" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="50"/>
    </parameter>
    <parameter name="billToId" direction="IN" nullable="true">
      <datatype name="VARCHAR" type="STRING" maxLength="255"/>
    </parameter>
    <parameter name="numberOfRowsPerPage" direction="IN" nullable="true">
      <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
    </parameter>
    <parameter name="pageNumber" direction="IN" nullable="true">
      <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
    </parameter>
    <parameter name="result" direction="OUT" nullable="true">
      <datatype name="CURSOR" type="TABLE" refId="256">
        <element name="invoiceNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="30"/>
        </element>
        <element name="invoiceDate">
          <datatype name="DATE" type="DATE"/>
        </element>
        <element name="coverageStartDate">
          <datatype name="VARCHAR" type="STRING" maxLength="40"/>
        </element>
        <element name="coverageEndDate">
          <datatype name="VARCHAR" type="STRING" maxLength="30"/>
        </element>
        <element name="invoiceStatus">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="invoiceType">
          <datatype name="VARCHAR" type="STRING" maxLength="50"/>
        </element>
        <element name="invoiceSubType">
          <datatype name="VARCHAR" type="STRING" maxLength="50"/>
        </element>
        <element name="billToGroupNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="billToDivisionNumber">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="billToGroupName">
          <datatype name="VARCHAR" type="STRING" maxLength="500"/>
        </element>
        <element name="numberOfEnrollees">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="invoiceAmount">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="adjustmentAmount">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="legalEntity">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="billToId">
          <datatype name="VARCHAR" type="STRING" maxLength="50"/>
        </element>
        <element name="billerId">
          <datatype name="VARCHAR" type="STRING" maxLength="50"/>
        </element>
        <element name="invoiceVersion">
          <datatype name="VARCHAR" type="STRING" maxLength="10"/>
        </element>
        <element name="rk">
          <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
        </element>
        <element name="totalNumberOfRows">
          <datatype name="INTEGER" type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
        </element>
      </datatype>
    </parameter>
  </parameters>
  <security>
    <owner user="nobody" domain="composite"/>
  </security>
  <dependency target="/shared/Delta_DV/Physical/Metadata/DataSources/Ebillpay" type="DATA_SOURCE">
    <datatype name="Tree" type="TREE" refId="257"></datatype>
  </dependency>
  <attribute name="SQL" type="STRING">&lt;version 2&gt;
SELECT 
    invoice.invoice_number invoiceNumber, 
    invoice.v_invoice_date invoiceDate, 
    invoice.v_coverage_start_date coverageStartDate, 
    invoice.v_coverage_end_date coverageEndDate, 
    invoice.invoice_status invoiceStatus, 
    invoice.v_invoice_type invoiceType, 
    invoice.v_invoice_sub_type invoiceSubType, 
    invoice.v_group_number billToGroupNumber, 
    invoice.v_bill_to_division_number billToDivisionNumber, 
    invoice.v_group_name billToGroupName, 
    invoice.v_number_of_enrollees numberOfEnrollees, 
    invoice.v_invoice_amount invoiceAmount, 
    invoice.v_adjustment_amount adjustmentAmount, 
    invoice.v_invoice_legal_entity legalEntity, 
    invoice.v_bill_to_id billToId, 
    invoice.v_biller_id billerId, 
    invoice.version_number invoiceVersion, 
&#x9; row_number() over (order by {0} )rk,
&#x9; COUNT(*) OVER () totalnumberofrows from [Group-Invoice].[dbo].[invoice] invoice 
where 
invoice.v_group_number = COALESCE(NULLIF(&apos;{1}&apos;,&apos;NULL&apos;),invoice.v_group_number)
AND invoice.v_invoice_date &gt;= COALESCE({2},invoice.v_invoice_date) 
AND invoice.v_invoice_date &lt;= COALESCE({3},invoice.v_invoice_date) 
AND invoice.invoice_number = COALESCE(NULLIF(&apos;{4}&apos;,&apos;NULL&apos;),invoice.invoice_number)
--AND (invoice.v_bill_to_id IN {5} or q&apos;[{5}]&apos; =q&apos;[(&apos;x&apos;)]&apos;)
AND invoice.v_bill_to_id in (SELECT value FROM STRING_SPLIT(COALESCE(NULLIF({5},NULL),invoice.v_bill_to_id), &apos;,&apos;))




</attribute>
  <attribute name="creationDate" type="LONG">1596519415150</attribute>
  <attribute name="creatorUserDomain" type="STRING">dev</attribute>
  <attribute name="creatorUserId" type="INTEGER">2850169</attribute>
  <attribute name="creatorUserName" type="STRING">dca32905</attribute>
  <attribute name="isSingleSelect" type="STRING">false</attribute>
  <attribute name="lastModifiedDate" type="LONG">1611709743011</attribute>
  <attribute name="lastModifiedUserDomain" type="STRING">dev</attribute>
  <attribute name="lastModifiedUserId" type="INTEGER">2850169</attribute>
  <attribute name="lastModifiedUserName" type="STRING">dca32905</attribute>
  <attribute name="passThroughSource" type="STRING">/shared/Delta_DV/Physical/Metadata/DataSources/Ebillpay</attribute>
  <attribute name="resourceModifiedDateOnSourceCISSite" type="LONG">1596519415150</attribute>
</metadata>