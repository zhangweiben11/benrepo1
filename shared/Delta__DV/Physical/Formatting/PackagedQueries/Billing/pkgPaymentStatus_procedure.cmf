<?xml version="1.1" encoding="UTF-8"?>
<!-- salt:cde82315-e936-41f1-90c6-32daeeda6afd -->
<metadata name="pkgPaymentStatus" path="/shared/Delta_DV/Physical/Formatting/PackagedQueries/Billing/pkgPaymentStatus" type="PROCEDURE" subtype="EXTERNAL_SQL_PROCEDURE" changeToken="0">
  <parameters>
    <parameter name="result" direction="OUT" nullable="true">
      <datatype name="CURSOR" type="TABLE" refId="256">
        <element name="receipt_number">
          <datatype name="VARCHAR" type="STRING" maxLength="30"/>
        </element>
        <element name="receipt_date">
          <datatype name="DATE" type="DATE"/>
        </element>
        <element name="amount">
          <datatype name="DOUBLE" type="FLOAT" minValue="2.2250738585072014E-308" maxValue="1.7976931348623157E308"/>
        </element>
        <element name="billto_div">
          <datatype name="VARCHAR" type="STRING" maxLength="40"/>
        </element>
        <element name="billto_account">
          <datatype name="VARCHAR" type="STRING" maxLength="30"/>
        </element>
        <element name="payment_method">
          <datatype name="VARCHAR" type="STRING" maxLength="255"/>
        </element>
        <element name="rev_category">
          <datatype name="VARCHAR" type="STRING" maxLength="255"/>
        </element>
        <element name="status">
          <datatype name="VARCHAR" type="STRING" maxLength="255"/>
        </element>
      </datatype>
    </parameter>
  </parameters>
  <security>
    <owner user="nobody" domain="composite"/>
  </security>
  <dependency target="/shared/Delta_DV/Physical/Metadata/DataSources/efs" type="DATA_SOURCE">
    <datatype name="Tree" type="TREE" refId="257"></datatype>
  </dependency>
  <attribute name="SQL" type="STRING">SELECT /*+parallel(16)*/ 
           acr.receipt_number 
           ,acr.receipt_date
           ,acr.amount
           ,hcsu.location billto_div
           ,hca.account_number billto_account
           ,arm.name payment_method
           ,l.meaning rev_category
           ,l_state.meaning status

from apps.ar_cash_receipts_all acr
inner join apps.ar_receipt_methods arm on acr.receipt_method_id = arm.receipt_method_id
inner join apps.hz_cust_site_uses_all hcsu on hcsu.site_use_id  = acr.CUSTOMER_SITE_USE_ID
inner join apps.hz_cust_acct_sites_all hcas on   hcas.cust_acct_site_id  = hcsu.cust_acct_site_id
inner join apps.hz_cust_accounts hca on hca.cust_account_id  = hcas.cust_account_id
inner join apps.ar_cash_receipt_history_all crh_current  on   crh_current.cash_receipt_id = acr.cash_receipt_id
                                                          AND   crh_current.org_id = acr.org_id
                                                          AND   crh_current.current_record_flag = &apos;Y&apos;
&#x9;                                                      AND crh_current.status IN (&apos;REVERSED&apos;,&apos;CONFIRMED&apos;,&apos;REMITTED&apos;)
inner join apps.ar_lookups l_state on  l_state.lookup_type = &apos;RECEIPT_CREATION_STATUS&apos;
                                   AND  l_state.lookup_code = crh_current.status&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;  
left outer join apps.ar_lookups l  on   l.lookup_code  = acr.REVERSAL_CATEGORY
                                    and l.lookup_type  = &apos;REVERSAL_CATEGORY_TYPE&apos;
union
SELECT /*+parallel(16)*/    
           acr.receipt_number 
           ,acr.receipt_date
           ,acr.amount
           ,null billto_div
           ,null billto_account 
           ,arm.name payment_method
           ,l.meaning rev_category
           ,l_state.meaning status
FROM apps.ar_cash_receipts_all acr
inner join apps.ar_receipt_methods arm on acr.receipt_method_id  = arm.receipt_method_id 
and acr.CUSTOMER_SITE_USE_ID iS NULL
inner join apps.ar_lookups l  on  l.lookup_type = &apos;REVERSAL_CATEGORY_TYPE&apos;
                              AND  l.lookup_code = acr.REVERSAL_CATEGORY  
inner join apps.ar_cash_receipt_history_all crh_current on   crh_current.cash_receipt_id = acr.cash_receipt_id
                                                     AND   crh_current.org_id = acr.org_id
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; AND   crh_current.current_record_flag = &apos;Y&apos;
&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9; AND crh_current.status IN (&apos;REVERSED&apos;,&apos;CONFIRMED&apos;,&apos;REMITTED&apos;)
inner join apps.ar_lookups l_state  on  l_state.lookup_type = &apos;RECEIPT_CREATION_STATUS&apos;
                                    AND  l_state.lookup_code = crh_current.status
</attribute>
  <attribute name="creationDate" type="LONG">1596692119927</attribute>
  <attribute name="creatorUserDomain" type="STRING">dev</attribute>
  <attribute name="creatorUserId" type="INTEGER">3980101</attribute>
  <attribute name="creatorUserName" type="STRING">dos59246</attribute>
  <attribute name="isSingleSelect" type="STRING">false</attribute>
  <attribute name="lastModifiedDate" type="LONG">1609896176534</attribute>
  <attribute name="lastModifiedUserDomain" type="STRING">composite</attribute>
  <attribute name="lastModifiedUserId" type="INTEGER">3980101</attribute>
  <attribute name="lastModifiedUserName" type="STRING">admin</attribute>
  <attribute name="passThroughSource" type="STRING">/shared/Delta_DV/Physical/Metadata/DataSources/efs</attribute>
  <attribute name="resourceModifiedDateOnSourceCISSite" type="LONG">1596692119927</attribute>
</metadata>